!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);class o extends EventTarget{constructor(){super()}initialize(){let e=indexedDB.open("attendance_db",1);e.onerror=e=>{console.log(e.errorCode)},e.onsuccess=e=>{this.db=e.target.result,this.emit("ready"),this.db.transaction("employees").objectStore("employees").count().onsuccess=e=>{0==e.target.result&&this.emit("empty")}},e.onupgradeneeded=e=>{this.db=e.target.result;let t=this.db.createObjectStore("employees",{autoIncrement:!0});t.createIndex("name","name",{unique:!0}),t.createIndex("department",["department","rankInt","name"],{unique:!1})}}getEmployees(){this.db.transaction("employees").objectStore("employees").index("department").openCursor().onsuccess=e=>{let t=event.target.result;if(t){let e=t.value,n=t.primaryKey;this.emit("employee-added",{key:n,employee:e}),t.continue()}}}updateEmployee(e,t){this.db.transaction("employees","readwrite").objectStore("employees").put(t,e)}addEmployees(e){let t=this.db.transaction("employees","readwrite"),n=t.objectStore("employees");t.onerror=e=>{console.log(e)};for(let t of e)n.add(t).onsuccess=e=>{let n=e.target.result;this.emit("employee-added",{key:n,employee:t})}}deleteEmployee(e){this.db.transaction("employees","readwrite").objectStore("employees").delete(e)}emit(e,t){let n=new CustomEvent(e,{detail:t});this.dispatchEvent(n)}on(e,t){this.addEventListener(e,t)}}const i={LG:1,MG:2,BG:3,COL:4,SLTC:5,LTC:6,MAJ:7,CPT:8,LTA:9,"2LT":10,DX:30,CWO:31,SWO:32,MWO:33,"1WO":34,"2WO":35,"3WO":36,MSG:37,SSG:38,"1SG":39,"2SG":40,"3SG":41,CFC:42,CPL:43,LCP:44,PTE:45,REC:46};var s={fromString(e){try{let t=e.split(","),n=t.length-1,o="TRUE"==t[n].trim().toUpperCase();o&&n--;let s=1,r="";for(;s<n;)s>1&&(r+=", "),r+=t[s].trim().toUpperCase(),s++;let a=t[0].trim().toUpperCase(),l=(e=>{if(e.toUpperCase().includes("DX")){return 30-Number(e.substring(2))}return i[e]})(a);if(void 0===l)throw Error;return{rank:a,rankInt:l,name:r,department:t[n].trim().toUpperCase(),status:0,isRegular:o,remark:""}}catch(e){return null}},toList(e){let t=e.trim().split(/\r?\n/),n=[];for(let e of t){let t=this.fromString(e);t&&n.push(t)}return n}};let r;class a extends EventTarget{constructor(){super(),this.list={},this.db=new o,this.db.on("employee-added",this.employeeAdded.bind(this)),this.db.on("ready",()=>{this.db.getEmployees()}),this.db.on("empty",()=>{this.emit("empty")})}static getInstance(){return r||(r=new a),r}start(){this.db.initialize()}isHigher(e,t){return e.rankInt<t.rankInt}employeeAdded(e){let{key:t,employee:n}=e.detail,o=n.department;this.list[o]||(this.list[o]=[]);let i=this.list[o].length;for(;i>0;){let e=this.list[o][i-1].employee;if(!this.isHigher(n,e))break;i--}this.list[o].splice(i,0,{key:t,employee:n}),this.emit("employee-added",{key:t,employee:n,index:i})}getItemIndex(e,t){return this.list[e].findIndex(e=>e.key==t)}removeEmployee(e,t){this.db.deleteEmployee(t);let n=this.getItemIndex(e,t);this.list[e].splice(n,1),0==this.list[e].length&&(this.emit("department-removed",e),delete this.list[e],0===Object.keys(this.list).length&&this.emit("empty"))}updateEmployeeStatus(e,t,n){let o=this.getItemIndex(e,t),i=this.list[e][o].employee;i.status=n,this.db.updateEmployee(t,i)}updateEmployeeRemark(e,t,n){let o=this.getItemIndex(e,t),i=this.list[e][o].employee;i.remark=n,this.db.updateEmployee(t,i)}addEmployees(e){let t=s.toList(e);this.db.addEmployees(t)}emit(e,t){let n=new CustomEvent(e,{detail:t});this.dispatchEvent(n)}on(e,t){this.addEventListener(e,t)}}var l={onclick:function(e,t){let n;e.onpointerdown=t=>{e.classList.add("active"),n=document.elementFromPoint(t.pageX,t.pageY)},e.onpointermove=e=>{},e.onpointerup=o=>{e.classList.remove("active"),n===document.elementFromPoint(o.pageX,o.pageY)&&t(o)}},animate:function(e,t,n){const o=t=>{e.removeEventListener("animationend",o),n()};e.addEventListener("animationend",o),e.classList.add(t)}};let d=!1,m=null,h=0;class c extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML='\n  <style>\n    .container {\n      position: relative;\n      width: 200px;\n    }\n    .menu {\n      position: absolute;\n      border-bottom-right-radius: 2px;\n      top: 0;\n      left: 0;\n      z-index: 5; \n      color: black;\n      width: inherit;\n      height: var(--min-height);\n      overflow: hidden;\n      box-shadow: 0;\n      pointer-events: auto;\n      transition: height .5s, box-shadow .5s .3s;\n      background: white;\n    }\n    \n    .appear {\n      transition: height .5s, box-shadow .5s;\n      height: var(--max-height);\n      box-shadow: 0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23);\n    }\n   \n    p {\n      margin: 0;\n      padding: 10px 15px;\n      font-size:  15px;\n     cursor: pointer;\n      touch-action: none;\n      transition: .2s background;\n    }\n\n    p.active {\n      background: #909090;\n    }\n\n    .appear > #list {\n      top: 0;\n    }\n\n    #list {\n      width: inherit;\n      position: absolute;\n      top: var(--item-offset);\n      left: 0;\n      transition: all .5s;\n    }\n\n\n\n  </style>\n  \n  <div class="container">\n    <p id="title">Empty</p>\n    <div class="menu">\n      <div id="list">\n      \n      </div>\n    </div>\n  \n  </div>\n',this.menu=this.shadowRoot.querySelector(".menu"),this.list=this.shadowRoot.getElementById("list"),this.options=[];let e=this.shadowRoot.getElementById("title");this.itemWidth=e.offsetHeight,this.menu.style.setProperty("--min-height",`${this.itemWidth}px`)}add(e){h++,this.menu.style.setProperty("--max-height",`${h*this.itemWidth}px`);let t=document.createElement("p");t.textContent=e,l.onclick(t,t=>{this.onSelected(e)}),this.list.appendChild(t),this.options.push(e)}remove(e){let t=this.options.findIndex(t=>t==e);this.options.splice(t,1),h--,this.list.children[t].remove(),this.menu.style.setProperty("--max-height",`${h*this.itemWidth}px`),m=null,this.setCurrentItem(this.options[0]);let n=new CustomEvent("onChange",{detail:{next:0}});this.dispatchEvent(n)}onSelected(e){if(1!=h)if(d){d=!1,this.setCurrentItem(e),this.menu.classList.remove("appear");let t=this.options.findIndex(t=>t==e),n=new CustomEvent("onChange",{detail:{next:t}});this.dispatchEvent(n)}else{if(h<1)return;d=!0,this.menu.classList.add("appear")}}setCurrentItem(e){if(null!=m){let e=this.options.findIndex(e=>e==m);this.list.children[e].classList.remove("selected")}let t=this.options.findIndex(t=>t==e);this.list.children[t].classList.add("selected"),this.list.style.setProperty("--item-offset",`-${t*this.itemWidth}px`),m=e}}class p extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML='\n    <style>\n      .container {\n        display: grid;\n        grid-auto-flow: column;\n        grid-auto-columns: 100vw;\n        height: 100%;\n        touch-action: none;\n        width: auto;\n        transform: translateX(0px);\n        overflow-x: hidden;\n        }\n      .disable-scrollbars::-webkit-scrollbar {\n        width: 0px;\n        background: transparent; /* Chrome/Safari/Webkit */\n      }\n        \n      .disable-scrollbars {\n        scrollbar-width: none; /* Firefox */\n            -ms-overflow-style: none;  /* IE 10+ */\n      }\n     \n    </style>\n\n    <div class="container disable-scrollbars">\n    </div>\n',this.container=this.shadowRoot.querySelector(".container");this.container;this.numberOfPages=0,this.currentIndex=0,this.pageWidth=window.innerWidth}getPage(e){return this.container.querySelector(e)}add(e){this.container.appendChild(e),this.numberOfPages++,this.container.style.width=`${this.pageWidth*this.numberOfPages}px`}setCurrentItem(e){this.currentIndex=e;let t=e*this.pageWidth;this.container.style.transform=`translateX(-${t}px`}}var u=[{name:"NOT SET",fullName:"NOT SET",category:"NOT SET"},{name:"PRESENT",fullName:"PRESENT",category:"PRESENT"},{name:"RSO",fullName:"RSO",category:"RSO/RSI"},{name:"RSI",fullName:"RSI",category:"RSO/RSI"},{name:"MC",fullName:"MC",category:"MC/MA"},{name:"MA",fullName:"MA",category:"MC/MA"},{name:"OIL",fullName:"OFF IN LIEU",category:"OIL/LEAVE"},{name:"AL",fullName:"ANNUAL LEAVE",category:"OIL/LEAVE"},{name:"UL",fullName:"URGENT LEAVE",category:"OIL/LEAVE"},{name:"OL",fullName:"OVERSEAS LEAVE",category:"OIL/LEAVE"},{name:"CL",fullName:"COMPASSIONATE LEAVE",category:"OIL/LEAVE"},{name:"PL",fullName:"PATERNITY LEAVE",category:"OIL/LEAVE"},{name:"PCL",fullName:"PARENT CARE LEAVE",category:"OIL/LEAVE"},{name:"CCL",fullName:"CHILD CARE LEAVE",category:"OIL/LEAVE"},{name:"AO",fullName:"ATTACHED OUT",category:"AO/OA"},{name:"OA",fullName:"OVERSEAS ATTACHMENT",category:"AO/OA"},{name:"OOC",fullName:"OUT OF CAMP",category:"OOC/OTHERS"},{name:"OTHERS",fullName:"OTHERS",category:"OOC/OTHERS"}];class y extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML='\n  <style>\n    .page {\n      width: 100vw;\n      height: 100%;\n    }\n    p {\n      margin: 0;\n    }\n    .item {\n      padding: 10px 15px;\n      transition: .3s background;\n    }\n    \n    .item:active {\n      background: grey;\n    }\n    \n    #name {\n      font-weight: 700;\n    }\n    \n    #status {\n      font-size: 0.8rem;\n      font-weight: 400;\n    }\n  </style>\n  \n  <div class="page">\n    <div id="list">\n    </div>\n  </div>\n  \n  <template id="item">\n    <div class="item">\n      <p id="name"></p>\n      <p id="status"></p>\n    </div>\n  </template>\n',this.list=this.shadowRoot.getElementById("list")}setPresenter(e){this.presenter=e}setDepartment(e){this.department=e}addEmployee(e,t,n){let o=this.createItem(e,t,n),i=this.list.children[n];this.list.insertBefore(o,i)}createItem(e,t,n){let o=t.rank+" "+t.name,i="";t.remark&&t.remark.length>0&&(i=` (${t.remark})`);let s=this.shadowRoot.getElementById("item").content.cloneNode(!0),r=s.querySelector(".item"),a=s.getElementById("name"),d=s.getElementById("status");return r.setAttribute("key",e),r.setAttribute("status",t.status),t.remark&&r.setAttribute("remark",t.remark),a.textContent=o,d.textContent=u[t.status].name+i,l.onclick(r,n=>{t.status=r.getAttribute("status"),t.remark=r.getAttribute("remark"),this.openDetails(e,t)}),s}getListItem(e){return this.list.querySelector(`.item[key='${e}']`)}onRemarkChanged(e,t){let n=this.getListItem(e);n.setAttribute("remark",t);let o=n.getAttribute("status"),i="";t&&t.length>0&&(i=` (${t})`),n.querySelector("#status").textContent=u[o].name+i,this.presenter.updateEmployeeRemark(this.department,e,t)}onStatusChanged(e,t){let n=this.getListItem(e);n.setAttribute("status",t),n.querySelector("#status").textContent=u[t].name,this.presenter.updateEmployeeStatus(this.department,e,t)}onDeleteEmployee(e){this.getListItem(e).remove(),this.presenter.removeEmployee(this.department,e)}onSaveEmployee(e,t){this.onDeleteEmployee(e),this.presenter.saveEmployeeInfo(t)}openDetails(e,t){let n=document.createElement("employee-dialogue");n.setEmployee(e,t,this),document.body.appendChild(n)}}class g extends HTMLElement{constructor(e){super(),this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML=(e=>`\n    <style>\n        #root {\n            position: absolute;\n            top: 0;\n            left: 0;\n            display: grid;\n            grid-template-columns: 1fr;\n            grid-template-areas: "content";\n            justify-items: center;\n            align-items: center;\n            height: 100vh;\n            opacity: 1;\n            z-index: 99;\n        }\n\n        @keyframes fade-in {\n            0% { opacity: 0; }\n            100% { opacity: 1; }\n        }\n    \n        @keyframes fade-out {\n            0% { opacity: 1; }\n            100% { opacity: 0; }\n        }\n    \n        @keyframes slide-in {\n            0% { transform: translateY(100px); }\n            100% { transform: translateY(0px); }\n        }\n        \n        @keyframes slide-out {\n            100% { transform: translateY(100px); }\n        }\n\n        div#root.show{\n            animation: fade-in .2s;\n        }\n\n        div#root.hide  {\n            animation: fade-out .2s forwards;\n        }\n\n        .show > #dialogue {\n            animation: slide-in .2s;\n        }\n        \n        .hide > #dialogue {\n            animation: slide-out .2s forwards;\n        }\n        \n        #scrim {\n            background: rgba(0,0,0,.2);\n            grid-area: content;\n            height: 100vh;\n            width: 100vw;\n        }\n\n        #dialogue {\n            grid-area: content;\n            background: white;\n            border-radius: 5px;\n            box-shadow: 0px 4px 4px rgba(0,0,0,.25);\n            padding: 15px 25px;\n            transform: translateY(0px);\n            width: calc(100% - 50px);\n            box-sizing: border-box;\n            margin: 0 30px;\n        }\n        \n        #dialogue.shake {\n            animation: shake 0.82s cubic-bezier(.36, .07, .19, .97) both;\n        }\n        \n        @keyframes shake {\n           10%, 90% {\n              transform: translateX(-1px);\n            }\n        \n           20%, 80% {\n              transform: translateX(2px);\n            }\n        \n            30%, 50%, 70% {\n              transform: translateX(-4px);\n            }\n        \n            40%, 60% {\n              transform: translateX(4px);\n            }\n          }\n    </style>\n\n    <div id="root">\n  \n        <div id="scrim"></div>\n    \n        <div id="dialogue">\n            ${e}\n        </div>\n        \n    </div>\n`)(e),this.root=this.shadowRoot.getElementById("root");let t=this.shadowRoot.getElementById("scrim"),n=this.shadowRoot.getElementById("dialogue");this.isCancellable=!0,l.animate(this.root,"show",()=>{this.root.classList.remove("show"),t.onclick=e=>{this.isCancellable?this.close():l.animate(n,"shake",()=>{n.classList.remove("shake")})}})}close(){l.animate(this.root,"hide",()=>{this.remove()})}}class b extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML='\n  <style>\n    :host {\n      --button-color: var(--color-primary);\n      --button-color-dark: var(--color-primary-dark);\n      --button-radius: 5px;\n    }\n    \n    :host([type="solid"]) > button {\n      background: var(--button-color);\n      color: white;\n      border: 2px solid var(--button-color);\n      border-radius: 2px;\n    }\n    \n    :host([type="outline"]) > button {\n      background: white;\n      color: var(--button-color);\n      border: 2px solid;\n      border-radius: 2px;\n      border-color: var(--button-color);\n    }\n    \n    :host([type="outline"]) button:active {\n      background: rgba(0,0,0,.2);\n    }\n    \n    :host([type="plain"]) > button {\n      background: white;\n      color: var(--button-color);\n      border-radius: 15px;\n    }\n    \n    :host([type="plain"]) > button:active {\n      background: rgba(0,0,0,.1);\n    }\n    \n    button {\n      font: inherit;\n      font-size: var(--button-font-size);\n      padding: var(--button-padding);\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      cursor: pointer;\n      outline: none;\n      border: none;\n      border-radius: var(--button-radius);\n      color: white;\n      background: var(--button-color);\n      width: 100%;\n      transition: all .2s;\n    }\n    \n    button:active {\n      background: var(--button-color-dark);\n    }\n  </style>\n  \n  <button><slot></slot></button>\n';let e=this.shadowRoot.querySelector("button");l.onclick(e,e=>{this.dispatchEvent(new Event("onclick"))})}set onclick(e){this.addEventListener("onclick",t=>e(t))}}class f{constructor(){this.employeeRepository=a.getInstance()}getSummary(){let e={},t=this.employeeRepository.list;for(let[n,o]of Object.entries(t))for(let{key:t,employee:n}of o){let t=n.status,o=u[t].category;e[o]||(e[o]={}),e[o][t]||(e[o][t]=[]),n.remark&&n.remark.length>0?e[o][t].push(n):e[o][t].unshift(n)}return e}async downloadToExcel(){let e=this.employeeRepository.list,t=[],n={};const o=e=>e.rank+" "+e.name;for(let[n,o]of Object.entries(e))for(let{key:e,employee:n}of o)t.push(n);t.sort((e,t)=>e.rankInt<t.rankInt?-1:t.rankInt<e.rankInt?1:e.name<t.name?-1:t.name<e.name?1:0);for(let e of t){let t=e.status;0==t&&(t=17),n[t]||(n[t]=[]),n[t].push(e)}let i=0,s=[];if(n[1]){for(let e of n[1])s.push(["",++i,o(e)]);s[0][0]="*Present*"}let r=i+"/"+t.length,a=new Date,l=a.getMonth(),d=String(a.getDate()).padStart(2,"0")+"/"+l+"/"+a.getFullYear(),m=[["SBW PLC Strength","",""],[],["Date",d],["Total Strength",r],[]];delete n[1];for(let[e,t]of Object.entries(n)){s.push([]);let n=s.length;for(let e of t)s.push(["",++i,o(e)]);s[n][0]=`*${u[e].fullName}*`}let h=await XlsxPopulate.fromBlankAsync();h.sheet(0).name("Attendance sheet"),h.sheet(0).column("A").style({bold:!0,italic:!0}),h.sheet(0).cell("A1").value(m.concat(s));let c=await h.outputAsync();return{name:`SBW PARADE STATE ${d}`,url:window.URL.createObjectURL(c)}}}class E extends HTMLElement{constructor(){super(),this.summaryPresenter=new f,this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML='\n    <style>\n        .container {\n            background: white;\n            height: 100%;\n            width: 100%;\n            position: absolute;\n            top: 0;\n            left: 0;\n            z-index: 9;\n            transition: .5s transform;\n            transform: translateY(100%);\n        }\n\n        .container.show {\n            transform: translateY(0%);\n        }\n\n        h3 {\n            margin: 0;\n            display: flex;\n            justify-content: start;\n            padding: 12px 10px;\n            box-shadow: 0px 2px 3px 0px rgba(0,0,0,0.2);\n        }\n        \n        wc-button {\n          --button-radius: 0;\n          --button-padding: 15px 10px;\n          --button-font-size: 1.3rem;\n          --color-primary: #2ecc71;\n          --color-primary-dark: #27ae60;\n          box-shadow: 0px 2px 3px 2px rgba(0,0,0,0.2);\n        }\n        \n        .container {\n          height: 100%;\n          display: flex;\n          flex-direction: column;\n        }\n        \n        #list { height: 100%;\n        overflow-y: scroll;\n        -webkit-overflow-scrolling: touch;\n        scroll-behavior: smooth;\n       // flex: 1;\n        }  \n        \n        .loading {\n          position: absolute;\n          background: white;\n          height: 100%;\n          width: 100%;\n          display: flex;\n          justify-content: center;\n          align-items: center;\n        }\n        \n        @keyframes fade-out {\n          to {opacity: 0;}\n        }\n        \n        .fade-out {\n          animation: fade-out 1s;\n        }\n        \n        .header {\n          display: flex:\n          justify-content: center;\n          align-items: center;\n          padding: 10px;\n          background: #95a5a6;\n          margin-top: 5px;\n        }\n        \n        .header:first-child {\n          margin-top: 0;\n        }\n        \n        .sub-header {\n          padding: 10px 10px 5px 10px;\n        }\n        \n        .item {\n          padding: 5px 10px;\n          font-size: 0.7rem;\n        }\n        \n        h4, h5, p {\n          margin: 0;\n        }\n        \n        .bold {\n          color: #c0392b;\n          font-weight: 700;\n        }\n        \n    </style>\n\n    <div class="container">\n        <h3>X Close</h3>\n        <div id="list"></div>\n        <wc-button>Export to excel</wc-button>\n        \n         <div class="loading">\n            <h4>Loading</h4>\n         </div>\n    </div>\n    \n    <template id="header">\n      <div class="header">\n        <h4></h4>\n      </div>\n    </template>\n    \n    <template id="sub-header">\n      <div class="sub-header">\n        <h5></h5>\n      </div>\n    </template>\n    \n    <template id="item"> \n      <div class="item">\n        <p></p>\n      </div>\n    </template>\n    \n';let e=this.shadowRoot.querySelector("h3");l.onclick(e,e=>{this.close()}),this.shadowRoot.querySelector("wc-button").onclick=e=>{this.downloadFile()}}close(){this.shadowRoot.querySelector(".container").classList.remove("show"),window.URL.revokeObjectURL(this.fileUrl)}show(){let e=this.shadowRoot.querySelector(".loading");e.style.display="flex",this.shadowRoot.querySelector(".container").classList.add("show");let t=this.shadowRoot.getElementById("list");t.innerHTML="";let n=this.summaryPresenter.getSummary();for(let[e,o]of Object.entries(n)){let n=this.createHeader(e),i=n.querySelector("h4");t.appendChild(n);let s=0,r=0;for(let[e,n]of Object.entries(o)){let o=this.createSubHeader(u[e].name);t.appendChild(o);for(let e of n){let n=this.createItem(e);t.appendChild(n),e.isRegular?s++:r++}}let a=e+" - ";r>0&&(a+=r+" NSF"),s>0&&(a+=" & "+s+" REG"),i.textContent=a}this.summaryPresenter.downloadToExcel().then(t=>{this.fileUrl=t.url,this.fileName=t.name,l.animate(e,"fade-out",()=>{e.style.display="none",e.classList.remove("fade-out")})})}downloadFile(){var e=document.createElement("a");e.href=this.fileUrl,e.download=this.fileName,document.body.appendChild(e),e.click(),e.remove()}createHeader(e){let t=this.shadowRoot.getElementById("header").content.cloneNode(!0);return t.querySelector("h4").textContent=e,t}createSubHeader(e){let t=this.shadowRoot.getElementById("sub-header").content.cloneNode(!0);return t.querySelector("h5").textContent=e,t}createItem(e){let t=this.shadowRoot.getElementById("item").content.cloneNode(!0),n=t.querySelector("p");e.remark.length>0&&n.classList.add("bold");let o=e.rank+" "+e.name;return e.remark&&e.remark.length>0&&(o+=" - "+e.remark),n.textContent=o,t}}window.onload=()=>{var e=Math.max(document.documentElement.clientWidth,window.innerWidth||0),t=Math.max(document.documentElement.clientHeight,window.innerHeight||0);let n=document.querySelector(":root");n.style.height=t,n.style.width=e,n.style.fontSize=Math.round(t/100)},customElements.define("wc-button",b),customElements.define("department-fragment",y),customElements.define("view-pager",p),customElements.define("dropdown-menu",c),customElements.define("edit-dialogue",class extends g{constructor(){super('\n    <style>\n        .container {\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n        }\n        textarea {\n            min-height: 100px;\n        }\n       \n        wc-button {\n            margin-top: 20px;\n            --button-font-size: 1rem;     \n            --button-padding: 10px;\n        }\n        \n        p {\n          margin: 10px 0;\n        }\n\n        textarea {\n            font: inherit;\n            margin: 15px 0;\n            outline: none;\n            border: 3px solid;\n            border-color: #b9b9b9;\n            border-radius: 3px;\n            padding: 5px;\n            font-size: 0.8rem;\n            transition: border-color .2s;\n        }\n\n        textarea:focus {\n            animation: glow 1.5s infinite;\n        }\n            \n        @keyframes glow {\n            0% { border-color: #b9b9b9; }\n            50% { border-color: #ED4C67; }\n            100% { border-color: #b9b9b9; }\n        }\n    </style>\n\n    \n    <div class="container">\n        <p>Add new personnels</p>\n\n        <textarea placeholder="RANK, NAME, DEPARTMENT\n\nCPL, Bob Jr, KKK Branch\nMAJ, James Bond, ZZZ Branch\nLCP, John Doe, XXX Branch\nPTE, William Baker, AAA Branch\n"></textarea>\n\n        <wc-button id="save">Save</wc-button>  \n    </div>\n'),this.employeeRepository=a.getInstance();const e=this.shadowRoot.getElementById("save"),t=this.shadowRoot.querySelector("textarea");e.onclick=e=>{let n;n=0==t.value.length?"LCP, NUR ILYAS, SIGNAL WING\n\n            MAJ, JOHN DOE, MWP BRANCH, true\n\n            PTE, BILLIE JOE, LOG BRANCH\n\n            CPL, HARRY POTTER, SIGNAL WING\n\n            PTE, LARRY JONES, SIGNAL WING\n\n            LCP, JIM BOB, LOG BRANCH\n\n            DX10, ROY JONES, LOG BRANCH, true\n\n            PTE, WILLIAM OSBORNE, MWP BRANCH\n\n            LTC, Jim, MWP BRANCH, true":t.value,this.employeeRepository.addEmployees(n)}}setCancellable(e){this.isCancellable=e,e||this.employeeRepository.on("employee-added",e=>{this.close()})}}),customElements.define("employee-dialogue",class extends g{constructor(){super('\n  <style>\n    .container {\n      position: relative;\n    }\n    .status {\n      display: flex;\n      flex-wrap: wrap;\n      width: 90%;\n      --button-padding: 5px;\n    }\n    .status > wc-button {\n      margin-right: 10px;\n      margin-bottom: 10px;\n    }\n    .remark > p {\n      margin: 5px 0;\n    }\n    input {\n      padding: 5px;\n      border: 1px solid grey;\n      transition: all .3s .3s;\n      outline:none;\n      font: inherit;\n    }\n    input:focus {\n      outline: none;\n      border: 1px solid #FF3838;\n    }\n    .header {\n      display: flex;\n      align-items: center;\n    }\n\n    .header > h4 {\n      flex-grow: 1;\n    }\n\n    .header > wc-button {\n      --button-padding: 3px 8px;\n    }\n\n    #edit-screen {\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      top: 0;\n      background: white;\n      display: none;\n      flex-direction: column;\n      justify-content: space-evenly;\n    }\n\n    #edit-screen > input {\n      width: 100%;\n    }\n\n    #edit-screen > .submit {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n    }\n\n    .submit > wc-button {\n      --button-padding: 5px 8px;\n      margin: 15px 10px;\n    }\n  </style>\n  \n  <div class="container">\n    <div id="main-screen">\n      <div class="header">\n        <h4></h4>\n        <wc-button type="plain" id="edit">edit</wc-button>\n      </div>\n      \n      <div class="status">\n        \n      </div>\n      \n      <div class="remark">\n        <p>Remarks</p>\n        <input id="status-input" type="text" placeholder="Event, work, pooping etc.">\n      </div>\n    </div>\n\n    <div id="edit-screen">\n      <input id="save-input" type="text" placeholder="Rank, Name, Department, isRegular(true)"}>\n\n      <div class="submit">\n        <wc-button id="save">Save</wc-button>\n        <wc-button id="delete" type="plain">Delete</wc-button>\n      </div>\n\n    </div>\n  </div>\n  \n');let e=this.shadowRoot.getElementById("edit-screen"),t=this.shadowRoot.getElementById("edit"),n=this.shadowRoot.getElementById("save"),o=this.shadowRoot.getElementById("delete");this.remark=this.shadowRoot.getElementById("status-input"),this.saveInput=this.shadowRoot.getElementById("save-input"),t.onclick=t=>{e.style.display="flex"},n.onclick=e=>{this.callback.onSaveEmployee(this.key,this.saveInput.value),super.close()},o.onclick=e=>{this.callback.onDeleteEmployee(this.key),super.close()}}close(){let e=this.remark.value.trim();this.callback.onRemarkChanged(this.key,e),super.close()}setStatus(e){let t,n=this.shadowRoot.querySelector(".status");this.statusIndex=e;for(let e in u){let o=document.createElement("wc-button");o.textContent=u[e].name,e==this.statusIndex?(o.setAttribute("type","solid"),t=o):o.setAttribute("type","outline"),n.appendChild(o),o.onclick=n=>{t!=o&&(this.statusIndex=e,o.setAttribute("type","solid"),t&&t.setAttribute("type","outline"),t=o,this.callback.onStatusChanged(this.key,this.statusIndex))}}}setEmployee(e,t,n){this.callback=n,this.key=e,this.employee=t,this.remark.value=t.remark,this.shadowRoot.querySelector("h4").textContent=t.rank+" "+t.name,this.setStatus(t.status),this.saveInput.value=t.rank+", "+t.name+", "+t.department}}),customElements.define("summary-view",E),document.getElementById("edit").onclick=e=>{let t=document.createElement("edit-dialogue");t.isCancellable=!0,document.body.appendChild(t)},document.getElementById("summary").onclick=e=>{document.querySelector("summary-view").show()};const x=a.getInstance();x.on("empty",e=>{let t=document.createElement("edit-dialogue");t.setCancellable(!1),document.body.appendChild(t)});new class{constructor(){this.employeeRepository=a.getInstance(),this.fragments={},this.viewpager=document.querySelector("view-pager"),this.dropdownMenu=document.querySelector("dropdown-menu"),this.employeeRepository.on("employee-added",this.addEmployee.bind(this)),this.employeeRepository.on("department-removed",this.removeDepartment.bind(this)),this.dropdownMenu.addEventListener("onChange",e=>{let t=e.detail.next;this.viewpager.setCurrentItem(t)})}removeDepartment(e){let t=e.detail;this.fragments[t].remove(),this.dropdownMenu.remove(t),delete this.fragments[t]}addEmployee(e){let{key:t,employee:n,index:o}=e.detail,i=n.department;if(!this.fragments[i]){let e=document.createElement("department-fragment");e.setPresenter(this),e.setDepartment(i),this.fragments[i]=e,this.viewpager.add(e),this.dropdownMenu.add(i)}this.fragments[i].addEmployee(t,n,o)}removeEmployee(e,t){this.employeeRepository.removeEmployee(e,t)}updateEmployeeStatus(e,t,n){this.employeeRepository.updateEmployeeStatus(e,t,n)}updateEmployeeRemark(e,t,n){this.employeeRepository.updateEmployeeRemark(e,t,n)}saveEmployeeInfo(e){this.employeeRepository.addEmployees(e)}};x.start()}]);